# Apollo Desktop

Desktop application for Apollo v2, built with [Tauri](https://tauri.app/).

## Prerequisites

- [Rust](https://rustup.rs/) (latest stable)
- [Bun](https://bun.sh/) 1.3.6+
- Platform-specific dependencies:
  - **macOS**: Xcode Command Line Tools
  - **Windows**: Visual Studio Build Tools, WebView2
  - **Linux**: `webkit2gtk-4.1`, `libappindicator3-1`, `librsvg2-dev`

## Development

```bash
# Install dependencies
bun install

# Run development mode (hot reload)
bun run tauri:dev

# Or run frontend only
bun run dev
```

## Building

```bash
# Build for current platform
bun run tauri:build

# Build with debug symbols
bun run tauri:build:debug
```

Output files will be in `src-tauri/target/release/bundle/`.

## Project Structure

```
packages/desktop/
├── src/                    # Frontend source (TypeScript/Solid.js)
│   └── main.tsx           # Desktop platform initialization
├── src-tauri/             # Tauri backend (Rust)
│   ├── src/
│   │   └── main.rs        # Rust commands and app setup
│   ├── Cargo.toml         # Rust dependencies
│   ├── tauri.conf.json    # Tauri configuration
│   └── icons/             # App icons
├── index.html             # HTML entry point
├── vite.config.ts         # Vite configuration
└── package.json           # Node dependencies
```

## Icons

To generate proper icons for all platforms, use the Tauri icon generator:

```bash
bunx tauri icon ./src-tauri/icons/icon.png
```

This will generate all required icon formats from a single 1024x1024 PNG.

## Platform-specific Notes

### macOS
- Uses overlay titlebar style for native look
- Supports both Apple Silicon and Intel architectures

### Windows
- Requires WebView2 runtime (bundled or system)
- NSIS installer generated by default

### Linux
- Generates AppImage, .deb, and .rpm packages
- Requires GTK3 and WebKitGTK

## Tauri Commands

The following commands are exposed to the frontend:

| Command | Description |
|---------|-------------|
| `get_os` | Get the current OS name |
| `get_version` | Get app version |
| `open_link` | Open URL in browser |
| `restart` | Restart the app |
| `notify` | Send system notification |
| `open_directory_picker` | Native directory dialog |
| `open_file_picker` | Native file dialog |
| `save_file_picker` | Native save dialog |
| `check_update` | Check for updates |
| `install_update` | Install available update |
| `get_default_server_url` | Get saved server URL |
| `set_default_server_url` | Save server URL |
